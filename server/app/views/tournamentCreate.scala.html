@import play.api.mvc.ControllerHelpers.request2flash

@(tournamentForm: Form[forms.TournamentCreateForm])(implicit request: RequestHeader, messages: Messages, webJarsUtil: org.webjars.play.WebJarsUtil)

@main("Create Tournament") {
    <div class="container">
        <article>
            <header>
                <h1>Create New Tournament</h1>
                <p>Create a new tournament with default settings.</p>
            </header>

            @if(request.flash.get("success").isDefined) {
                <div role="alert">
                    @request.flash.get("success")
                </div>
            }

            @if(request.flash.get("error").isDefined) {
                <div role="alert">
                    @request.flash.get("error")
                </div>
            }

            @helper.form(action = routes.TournamentController.createTournament()) {
                @helper.CSRF.formField
                
                <fieldset>
                    <label for="name">
                        Tournament Name *
                        <input type="text" 
                               id="name" 
                               name="name" 
                               value="@tournamentForm("name").value.getOrElse("")" 
                               placeholder="Enter tournament name"
                               @if(tournamentForm("name").hasErrors) {aria-invalid="true"}
                               required>
                        @if(tournamentForm("name").hasErrors) {
                            <small>@tournamentForm("name").errors.map(_.message).mkString(", ")</small>
                        } else {
                            <small>Enter a descriptive name for your tournament.</small>
                        }
                    </label>
                </fieldset>

                <article>
                    <header>
                        <h3>Default Settings</h3>
                    </header>
                    <p>The tournament will be created with these default settings:</p>
                    <ul>
                        <li><strong>Max Participants:</strong> 16</li>
                        <li><strong>Registration:</strong> Opens immediately, closes in 7 days</li>
                        <li><strong>Status:</strong> Registration Open</li>
                        <li><strong>Description:</strong> None (can be added later)</li>
                    </ul>
                </article>

                <div class="grid">
                    <button type="submit">Create Tournament</button>
                </div>
            }

            <footer>
                <div class="grid">
                    <a href="@routes.TournamentController.showOpenTournaments()" role="button" class="secondary">View All Tournaments</a>
                    <a href="@routes.HomeController.index()" role="button" class="contrast">Back to Home</a>
                </div>
            </footer>
        </article>
    </div>

}
